# üü¢ 1-–π —ç—Ç–∞–ø: –±–∏–ª–¥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
FROM node:20.16.0-slim AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .

RUN npm run build

# üîπ 2-–π —ç—Ç–∞–ø: –ó–∞–ø—É—Å–∫–∞–µ–º TestCafe
FROM testcafe/testcafe:latest

WORKDIR /tests

COPY --from=builder /app/dist /tests

CMD ["firefox", "/tests/**/*.js"]
